<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Prompt Terapi BebasNyeri</title>
<meta name="theme-color" content="#b30000">

<style>
body { font-family: Arial; background:#f5f5f5; padding:15px; }
h2 { color:#b30000; }
label { font-weight:bold; display:block; margin-top:10px; }
input, textarea, select {
    width:100%; padding:8px; margin-top:4px;
    border-radius:6px; border:1px solid #ccc;
}
button {
    margin-top:15px; padding:10px;
    background:#b30000; color:white;
    border:none; border-radius:6px;
    font-weight:bold; cursor:pointer;
}
textarea { min-height:90px; }
.result-box {
    background:white; padding:10px;
    margin-top:15px; border-radius:6px;
    white-space:pre-wrap;
}
</style>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>

<h2>Form Konsultasi Terapi BebasNyeri</h2>

<label>Nama Pasien</label>
<input type="text" id="nama">

<label>Umur</label>
<input type="number" id="umur">

<label>Jenis Kelamin</label>
<select id="jk">
<option>Laki-laki</option>
<option>Perempuan</option>
</select>

<label>Sedang Hamil?</label>
<select id="hamil">
<option>Tidak</option>
<option>Ya</option>
</select>

<label>Jika Hamil, Berapa Bulan?</label>
<input type="text" id="bulanHamil">

<label>Riwayat Operasi</label>
<input type="text" id="operasi">

<label>Riwayat Penyakit</label>
<textarea id="penyakit"></textarea>

<label>Hasil Medis (HB, Tensi, Gula, dll)</label>
<textarea id="medis"></textarea>

<label>Keluhan Saat Ini</label>
<textarea id="keluhan"></textarea>

<label>Hasil Saran Terapi dari AI (Copy dari Gemini/ChatGPT)</label>
<textarea id="hasilAI"></textarea>

<button onclick="buatPrompt()">Buat Prompt AI + Copy</button>
<button onclick="buatLaporanPDF()">Buat Laporan PDF Pasien</button>

<div class="result-box" id="hasil"></div>

<script>
function buatPrompt(){
let prompt = `Anda adalah asisten AI klinik terapi BebasNyeri.

Berikan saran TERAPI pendamping serta pantangan makan/minum.

Data Pasien:
Nama: ${nama.value}
Umur: ${umur.value}
Jenis Kelamin: ${jk.value}
Sedang Hamil: ${hamil.value}
Bulan Kehamilan: ${bulanHamil.value}
Riwayat Operasi: ${operasi.value}
Riwayat Penyakit: ${penyakit.value}
Hasil Medis: ${medis.value}
Keluhan: ${keluhan.value}

Berikan jawaban dengan format:
1. Ringkasan kondisi
2. Saran terapi pendamping (BUKAN diagnosis medis)
3. Makanan/minuman yang disarankan
4. Makanan/minuman yang harus dihindari
5. Catatan keselamatan terapi`;

hasil.textContent = prompt;
copyToClipboard(prompt);
alert("Prompt berhasil dibuat & disalin otomatis!");
}

function copyToClipboard(text) {
if (navigator.clipboard) {
    navigator.clipboard.writeText(text);
} else {
    let textarea = document.createElement("textarea");
    textarea.value = text;
    document.body.appendChild(textarea);
    textarea.select();
    document.execCommand("copy");
    document.body.removeChild(textarea);
}
}

async function buatLaporanPDF() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();

    const today = new Date();
    const tanggal = today.toLocaleDateString("id-ID");

    const logoUrl = "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjmB5waUZPR1ObcznyqdysJ8dTKtlSi6tJ0FjtZE7euRJSauvihJM8JggFGSmCh0NDw_yiCUPeM4psUDIU57DbL66udOJ8a_xYimiEn3onUY-RV4AWpV1DT5R_TwT3_LS7pRWDRkJGzCi2RhyphenhyphenRFDFDwCxZCh_dBYlj0ymUjNkKG7izw57vS_W0fONoDHtJ5/s1536/1000130006.png";

    const img = new Image();
    img.crossOrigin = "anonymous";
    img.src = logoUrl;

    img.onload = function () {
        doc.addImage(img, "PNG", 10, 8, 25, 25);

        doc.setFontSize(14);
        doc.text("Laporan Terapi Bebas Nyeri", 105, 15, null, null, "center");
        doc.setFontSize(10);
        doc.text("Jln. Cendana no. 3 Kisaran, Samping Bulog/Universitas Asahan.", 105, 21, null, null, "center");
        doc.text("Website: https://www.bebasnyeri.com", 105, 26, null, null, "center");
        doc.line(10, 35, 200, 35);

        doc.setFontSize(11);
        doc.text("Tanggal: " + tanggal, 10, 42);
        doc.text("Nama Pasien: " + nama.value, 10, 50);
        doc.text("Umur: " + umur.value + " tahun", 10, 56);
        doc.text("Jenis Kelamin: " + jk.value, 10, 62);

        let isi = `
Keluhan Utama:
${keluhan.value}

Riwayat Penyakit:
${penyakit.value}

Hasil Pemeriksaan Medis:
${medis.value}

Saran Terapi & Pantangan:
${hasilAI.value}

Catatan:
Terapi ini bersifat pendamping dan tidak menggantikan diagnosis dokter.
`;

        let lines = doc.splitTextToSize(isi, 180);
        doc.text(lines, 10, 75);

        doc.save("Laporan_Terapi_" + nama.value.replace(/\s/g,'_') + ".pdf");
    };

    img.onerror = function(){
        alert("Gagal memuat logo. Periksa koneksi internet.");
    }
}
</script>

</body>
</html>
